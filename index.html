<script type="module">
  import { products } from './products.js';

  async function loadProducts() {
    try {
      const productList = document.getElementById('product-list');
      productList.innerHTML = '';

      products.forEach(product => {
        const productCard = document.createElement('div');
        productCard.className = 'product-card';

        productCard.innerHTML = `
          <img src="${product.picture || 'https://via.placeholder.com/300x400?text=Нет+фото'}" alt="${product.name}" class="product-image">
          <h3 class="product-name">${product.name}</h3>
          <p class="product-price">${product.price} ₽</p>
          <button class="btn-primary" onclick="addToCart('${product.name}')">В корзину</button>
        `;

        productList.appendChild(productCard);
      });
    } catch (error) {
      console.error('Ошибка загрузки товаров:', error);
      document.getElementById('product-list').innerHTML = '<p>Не удалось загрузить товары. Попробуйте позже.</p>';
    }
  }

  document.addEventListener('DOMContentLoaded', loadProducts);
</script>
